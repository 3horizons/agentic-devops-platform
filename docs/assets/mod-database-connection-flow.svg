<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 500" font-family="Segoe UI, sans-serif">
  <defs>
    <linearGradient id="appg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#27ae60"/><stop offset="100%" stop-color="#229954"/></linearGradient>
    <linearGradient id="kvg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#3498db"/><stop offset="100%" stop-color="#2980b9"/></linearGradient>
    <linearGradient id="conng" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#e67e22"/><stop offset="100%" stop-color="#d35400"/></linearGradient>
    <linearGradient id="dbg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#9b59b6"/><stop offset="100%" stop-color="#8e44ad"/></linearGradient>
    <filter id="ds"><feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/></filter>
    <marker id="arr" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" fill="#7f8c8d"/></marker>
  </defs>
  <rect width="700" height="500" rx="12" fill="#f8f9fa" stroke="#dee2e6"/>
  <text x="350" y="30" text-anchor="middle" font-size="18" font-weight="700" fill="#2c3e50">Database Connection Security Flow</text>

  <!-- Application -->
  <rect x="80" y="50" width="540" height="70" rx="10" fill="url(#appg)" filter="url(#ds)"/>
  <text x="100" y="80" font-size="14" font-weight="700" fill="#fff">APPLICATION (Pod)</text>
  <text x="100" y="100" font-size="10" fill="rgba(255,255,255,0.85)">Requests database credentials via Workload Identity</text>
  <line x1="350" y1="122" x2="350" y2="147" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="360" y="140" font-size="9" fill="#7f8c8d">Workload Identity auth</text>

  <!-- Key Vault -->
  <rect x="80" y="152" width="540" height="80" rx="10" fill="url(#kvg)" filter="url(#ds)"/>
  <text x="100" y="182" font-size="14" font-weight="700" fill="#fff">AZURE KEY VAULT</text>
  <text x="100" y="202" font-size="10" fill="#d6eaf8">Stores: connection-string · admin-password · server-fqdn · ssl-certificate</text>
  <line x1="350" y1="234" x2="350" y2="259" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="360" y="252" font-size="9" fill="#7f8c8d">Returns connection string</text>

  <!-- Connection String -->
  <rect x="80" y="264" width="540" height="80" rx="10" fill="url(#conng)" filter="url(#ds)"/>
  <text x="100" y="294" font-size="14" font-weight="700" fill="#fff">CONNECTION STRING</text>
  <text x="100" y="314" font-size="10" fill="rgba(255,255,255,0.85)">Server=tcp:mydb.database.azure.net;Database=app;Authentication=Active Directory Managed Identity</text>
  <line x1="350" y1="346" x2="350" y2="371" stroke="#7f8c8d" stroke-width="2" marker-end="url(#arr)"/>
  <text x="360" y="364" font-size="9" fill="#7f8c8d">Private Endpoint connection</text>

  <!-- Database -->
  <rect x="80" y="376" width="540" height="70" rx="10" fill="url(#dbg)" filter="url(#ds)"/>
  <text x="100" y="406" font-size="14" font-weight="700" fill="#fff">AZURE DATABASE (PostgreSQL / SQL)</text>
  <text x="100" y="426" font-size="10" fill="rgba(255,255,255,0.85)">Private endpoint · Firewall rules · Azure AD authentication · TLS 1.2 enforced</text>

  <!-- Legend -->
  <rect x="80" y="465" width="12" height="12" rx="2" fill="#27ae60"/>
  <text x="98" y="476" font-size="9" fill="#555">Application</text>
  <rect x="180" y="465" width="12" height="12" rx="2" fill="#3498db"/>
  <text x="198" y="476" font-size="9" fill="#555">Key Vault</text>
  <rect x="280" y="465" width="12" height="12" rx="2" fill="#e67e22"/>
  <text x="298" y="476" font-size="9" fill="#555">Connection</text>
  <rect x="380" y="465" width="12" height="12" rx="2" fill="#9b59b6"/>
  <text x="398" y="476" font-size="9" fill="#555">Database</text>
  <text x="480" y="476" font-size="9" fill="#7f8c8d" font-style="italic">&#8595; Flow: App → Key Vault → Connection → DB</text>
</svg>