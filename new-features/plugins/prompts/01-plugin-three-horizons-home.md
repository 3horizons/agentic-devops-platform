# Plugin 1: Three Horizons Home Cards Widget

> **Plugin Name**: `plugin-three-horizons-home`
> **Package**: `@three-horizons/backstage-plugin-three-horizons-home`
> **Type**: Frontend Dynamic Plugin for RHDH 1.8
> **MountPoint**: `home.page/cards`
> **Priority**: HIGH ‚Äî Core visual identity of the platform

---

## 1. Objective

Create a custom RHDH Dynamic Plugin that renders **three Horizon Cards** on the Developer Hub homepage. Each card represents a maturity level of the Three Horizons Agentic DevOps Platform:

| Card | Title | Color | Icon | Description | Tags |
|------|-------|-------|------|-------------|------|
| H1 | Horizon 1 ‚Äî Foundation | `#00A4EF` (Microsoft Blue) | üî® | Core platform, CI/CD, and developer onboarding | IDP Portal, GitHub, Templates, CI/CD |
| H2 | Horizon 2 ‚Äî Intelligence | `#7FBA00` (Microsoft Green) | ‚ö° | AI-powered development and intelligent automation | Copilot, AI Foundry, MCP, Lightspeed |
| H3 | Horizon 3 ‚Äî Autonomy | `#FFB900` (Microsoft Yellow) | üöÄ | Self-healing systems and autonomous operations | Agents, Self-Healing, Predictive |

---

## 2. Visual Reference (from index.html mockup)

```html
<div class="horizon-row" style="display:grid; grid-template-columns:repeat(3,1fr); gap:20px;">
  <div class="hz-card" style="border-top:4px solid #00A4EF; border-radius:12px; padding:20px; background:#fff; border:1px solid #E8E8EC;">
    <div style="font-size:28px; margin-bottom:8px;">üî®</div>
    <div style="font-size:16px; font-weight:700; margin-bottom:4px;">Horizon 1 ‚Äî Foundation</div>
    <div style="font-size:14px; color:#5C5C6D; line-height:1.5;">Core platform, CI/CD, and developer onboarding</div>
    <div style="margin-top:8px; display:flex; flex-wrap:wrap; gap:4px;">
      <span class="tag tag-blue">IDP Portal</span>
      <span class="tag tag-blue">GitHub</span>
      <span class="tag tag-blue">Templates</span>
      <span class="tag tag-blue">CI/CD</span>
    </div>
  </div>
  <!-- repeat for H2 (green) and H3 (yellow) -->
</div>
```

### Design Specifications

- **Layout**: 3-column grid, equal width, responsive (stacks on mobile)
- **Card**: White background, 1px border `#E8E8EC`, border-radius 12px, padding 20px
- **Top border**: 4px solid, color per horizon (blue/green/yellow)
- **Hover**: `box-shadow: 0 8px 24px rgba(0,0,0,0.12)`, `translateY(-3px)`
- **Tags**: Small chips with background matching horizon color at 10% opacity
- **Typography**: Inter/Segoe UI, title 16px bold, description 14px, tags 12px

---

## 3. Technical Architecture

### 3.1 Plugin Scaffolding

```bash
# Prerequisites
node --version  # v22+
npx @backstage/create-app@latest --skip-install

# Create the plugin
cd plugins/
npx @backstage/cli new --select plugin --id three-horizons-home
```

### 3.2 React Component Structure

```
plugins/three-horizons-home/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                    # Public exports
‚îÇ   ‚îú‚îÄ‚îÄ plugin.ts                   # Plugin definition with createPlugin()
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ThreeHorizonsCard.tsx    # Main card component (exported)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HorizonCard.tsx         # Individual horizon card
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ HorizonTag.tsx          # Tag chip component
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ horizons.ts             # Static horizon data (configurable)
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îî‚îÄ‚îÄ theme.ts                # Color constants, spacing
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ dist-scalprum/                  # Generated by RHDH CLI export
‚îî‚îÄ‚îÄ README.md
```

### 3.3 Core Component: `ThreeHorizonsCard.tsx`

```tsx
import React from 'react';
import { InfoCard } from '@backstage/core-components';
import Grid from '@mui/material/Grid';
import Box from '@mui/material/Box';
import Typography from '@mui/material/Typography';
import Chip from '@mui/material/Chip';

interface HorizonData {
  title: string;
  icon: string;
  description: string;
  color: string;
  tags: string[];
}

const HORIZONS: HorizonData[] = [
  {
    title: 'Horizon 1 ‚Äî Foundation',
    icon: 'üî®',
    description: 'Core platform, CI/CD, and developer onboarding',
    color: '#00A4EF',
    tags: ['IDP Portal', 'GitHub', 'Templates', 'CI/CD'],
  },
  {
    title: 'Horizon 2 ‚Äî Intelligence',
    icon: '‚ö°',
    description: 'AI-powered development and intelligent automation',
    color: '#7FBA00',
    tags: ['Copilot', 'AI Foundry', 'MCP', 'Lightspeed'],
  },
  {
    title: 'Horizon 3 ‚Äî Autonomy',
    icon: 'üöÄ',
    description: 'Self-healing systems and autonomous operations',
    color: '#FFB900',
    tags: ['Agents', 'Self-Healing', 'Predictive'],
  },
];

export const ThreeHorizonsCard = () => (
  <Grid container spacing={3}>
    {HORIZONS.map((h) => (
      <Grid item xs={12} md={4} key={h.title}>
        <Box
          sx={{
            background: '#fff',
            border: '1px solid #E8E8EC',
            borderTop: `4px solid ${h.color}`,
            borderRadius: '12px',
            padding: '20px',
            height: '100%',
            transition: 'all 0.2s ease',
            '&:hover': {
              boxShadow: '0 8px 24px rgba(0,0,0,0.12)',
              transform: 'translateY(-3px)',
            },
          }}
        >
          <Typography sx={{ fontSize: 28, mb: 1 }}>{h.icon}</Typography>
          <Typography sx={{ fontSize: 16, fontWeight: 700, mb: 0.5 }}>
            {h.title}
          </Typography>
          <Typography sx={{ fontSize: 14, color: '#5C5C6D', lineHeight: 1.5 }}>
            {h.description}
          </Typography>
          <Box sx={{ mt: 1, display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>
            {h.tags.map((tag) => (
              <Chip
                key={tag}
                label={tag}
                size="small"
                sx={{
                  fontSize: 12,
                  height: 24,
                  backgroundColor: `${h.color}1A`,
                  color: h.color,
                  fontWeight: 600,
                }}
              />
            ))}
          </Box>
        </Box>
      </Grid>
    ))}
  </Grid>
);
```

### 3.4 Plugin Definition: `plugin.ts`

```tsx
import { createPlugin } from '@backstage/core-plugin-api';

export const threeHorizonsHomePlugin = createPlugin({
  id: 'three-horizons-home',
});
```

### 3.5 Public Export: `index.ts`

```tsx
export { threeHorizonsHomePlugin } from './plugin';
export { ThreeHorizonsCard } from './components/ThreeHorizonsCard';
```

---

## 4. Dynamic Plugin Packaging for RHDH

### 4.1 Export with RHDH CLI

```bash
cd plugins/three-horizons-home

# Install RHDH CLI
npm install --save-dev @red-hat-developer-hub/cli

# Export as Scalprum dynamic plugin
npx @red-hat-developer-hub/cli package export \
  --in-place \
  --clean
```

This generates `dist-scalprum/` with the federated module.

### 4.2 Package as OCI Image

```bash
# Package the plugin
npx @red-hat-developer-hub/cli package package \
  --tag quay.io/three-horizons/backstage-plugin-three-horizons-home:0.1.0

# Push to registry
podman push quay.io/three-horizons/backstage-plugin-three-horizons-home:0.1.0
```

---

## 5. RHDH Configuration

### 5.1 dynamic-plugins.yaml

```yaml
plugins:
  - package: oci://quay.io/three-horizons/backstage-plugin-three-horizons-home:0.1.0!plugin-three-horizons-home
    disabled: false
    pluginConfig:
      dynamicPlugins:
        frontend:
          plugin-three-horizons-home:
            mountPoints:
              - mountPoint: home.page/cards
                importName: ThreeHorizonsCard
                config:
                  layouts:
                    xl: { w: 12, h: 6 }
                    lg: { w: 12, h: 6 }
                    md: { w: 12, h: 6 }
                    sm: { w: 12, h: 8 }
                    xs: { w: 12, h: 12 }
                    xxs: { w: 12, h: 12 }
```

### 5.2 Layout Position on Homepage

The RHDH Dynamic Home Page uses a 12-column grid. This widget should be placed **below** the SearchBar and QuickAccessCard:

```
Row 0:  [SearchBar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ w:12 h:1]
Row 1:  [QuickAccessCard ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ w:12 h:8]
Row 9:  [ThreeHorizonsCard ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ w:12 h:6]   ‚Üê THIS PLUGIN
Row 15: [CatalogStarredEntities ‚îÄ‚îÄ‚îÄ w:12 h:4]
```

---

## 6. Acceptance Criteria

- [ ] Plugin renders 3 horizon cards in a responsive 3-column grid
- [ ] Each card has correct: icon, title, description, tags, top border color
- [ ] Microsoft brand colors used: Blue `#00A4EF`, Green `#7FBA00`, Yellow `#FFB900`
- [ ] Hover animation works (shadow + translateY)
- [ ] Tags display with correct color-matched background
- [ ] Plugin mounts correctly via `home.page/cards` mountPoint
- [ ] Plugin exports as Scalprum dynamic module
- [ ] Plugin packages as OCI image for RHDH deployment
- [ ] Responsive: stacks to 1 column on mobile, 2 on tablet
- [ ] No external dependencies beyond `@backstage/core-components` and `@mui/material`

---

## 7. Files to Create

| File | Description |
|------|-------------|
| `plugins/three-horizons-home/package.json` | Plugin package with Backstage deps |
| `plugins/three-horizons-home/src/index.ts` | Public exports |
| `plugins/three-horizons-home/src/plugin.ts` | Plugin definition |
| `plugins/three-horizons-home/src/components/ThreeHorizonsCard.tsx` | Main component |
| `plugins/three-horizons-home/README.md` | Plugin documentation |
| `new-features/deploy/dynamic-plugins.yaml` | Update with plugin entry |
