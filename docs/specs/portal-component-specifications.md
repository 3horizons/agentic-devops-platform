# Three Horizons Portal — Component Specifications

> Generated by `@rhdh-architect` | References: portal-gap-analysis.md, backstage-apis.md, frontend-wiring.md

---

## Plugin 1: `@internal/plugin-home-three-horizons`

### Component: ColorBar

| Field | Value |
|-------|-------|
| **Purpose** | Render the Microsoft 4-color gradient bar at the top of the home page |
| **Data Sources** | None (pure CSS) |
| **Backstage APIs** | None |
| **Wiring** | Part of `ThreeHorizonsHomePage` component tree (not a separate mountPoint) |

**Props:**
```typescript
interface ColorBarProps {
  height?: number; // default: 4 (pixels)
}
```

**Visual Requirements:**
- `background: linear-gradient(to right, #F25022 25%, #7FBA00 50%, #00A4EF 75%, #FFB900 100%)`
- Full width, fixed at top of page content area (below RHDH header)
- Height: 4px

---

### Component: HeroBanner

| Field | Value |
|-------|-------|
| **Purpose** | Display the portal welcome message with title, subtitle, and global search |
| **Data Sources** | Static text + `searchApiRef` for search |
| **Backstage APIs** | `searchApiRef` (full-text search), `configApiRef` (portal title) |
| **Wiring** | Child of `ThreeHorizonsHomePage` |

**Props:**
```typescript
interface HeroBannerProps {
  title?: string;       // default: "Agentic DevOps Platform"
  subtitle?: string;    // default: "Your Internal Developer Platform..."
  showSearch?: boolean; // default: true
}
```

**Visual Requirements:**
- White background with subtle gradient
- Title in `#1B1B1F`, 32px, bold, Segoe UI
- Subtitle in `#666`, 16px
- Search bar: centered, 600px width, `searchApiRef` integration
- Padding: 48px vertical

---

### Component: StatCard (reusable)

| Field | Value |
|-------|-------|
| **Purpose** | Display a single metric with count, label, icon, and colored top border |
| **Data Sources** | Value passed via props |
| **Backstage APIs** | None (parent provides data) |
| **Wiring** | Used by `StatCards` and `GroupStats` |

**Props:**
```typescript
interface StatCardProps {
  value: number;
  label: string;
  icon: React.ReactNode;
  color: 'blue' | 'green' | 'yellow' | 'red';
  onClick?: () => void; // optional navigation
}
```

**Visual Requirements:**
- White card, border-radius 12px, box-shadow
- Colored top border (3px): blue=#00A4EF, green=#7FBA00, yellow=#FFB900, red=#F25022
- Value: 36px bold, #1B1B1F
- Label: 14px, #666
- Icon: 24px, colored matching the border

---

### Component: StatCards

| Field | Value |
|-------|-------|
| **Purpose** | Render 4 stat cards (Components, APIs, Templates, Horizons) from live catalog data |
| **Data Sources** | `catalogApiRef` entity counts |
| **Backstage APIs** | `catalogApiRef.getEntities()` with kind filters |
| **Wiring** | Child of `ThreeHorizonsHomePage` |

**Props:**
```typescript
interface StatCardsProps {
  // No props; fetches data internally via useEntityCounts()
}
```

**Data Fetching Hook: `useEntityCounts()`**
```typescript
// Returns { components: number, apis: number, templates: number, loading: boolean, error?: Error }
// Uses catalogApiRef.getEntities() with filter: { kind: 'Component' | 'API' | 'Template' }
```

**Visual Requirements:**
- 4 cards in a row (CSS Grid: `grid-template-columns: repeat(4, 1fr)`)
- Gap: 24px
- Card 1 (blue): Components count
- Card 2 (green): APIs count
- Card 3 (yellow): Templates count
- Card 4 (red): Horizons (static: 3)
- Responsive: 2 columns on tablet, 1 on mobile

---

### Component: HorizonCard (reusable)

| Field | Value |
|-------|-------|
| **Purpose** | Display a single Three Horizons maturity card (H1, H2, or H3) |
| **Data Sources** | Static config (horizon info) + optional catalog count |
| **Backstage APIs** | None (parent provides data) |
| **Wiring** | Used by `HorizonCards` |

**Props:**
```typescript
interface HorizonCardProps {
  horizon: 'H1' | 'H2' | 'H3';
  title: string;        // "Foundation" | "Enhancement" | "Innovation"
  description: string;
  color: string;         // border color
  icon: React.ReactNode;
  templateCount: number; // number of templates in this horizon
  link: string;          // route to filtered catalog/create page
}
```

**Visual Requirements:**
- White card, border-radius 12px, left border 4px in horizon color
- H1=#00A4EF (blue), H2=#7FBA00 (green), H3=#FFB900 (yellow)
- Horizon badge: "H1", "H2", "H3" pill in horizon color
- Title: 20px bold, Description: 14px
- "Explore" button link at bottom

---

### Component: HorizonCards

| Field | Value |
|-------|-------|
| **Purpose** | Render 3 horizon cards (H1 Foundation, H2 Enhancement, H3 Innovation) |
| **Data Sources** | Static config (horizon metadata) |
| **Backstage APIs** | `catalogApiRef` (optional: count templates per horizon) |
| **Wiring** | Child of `ThreeHorizonsHomePage` |

**Props:**
```typescript
interface HorizonCardsProps {
  // No props; uses static horizons config
}
```

**Visual Requirements:**
- 3 cards in a row (CSS Grid: `grid-template-columns: repeat(3, 1fr)`)
- Gap: 24px
- Section title: "Three Horizons Model" above cards

---

### Component: QuickAccess

| Field | Value |
|-------|-------|
| **Purpose** | Display 4 quick-action buttons linking to main portal sections |
| **Data Sources** | Static route links |
| **Backstage APIs** | None |
| **Wiring** | Child of `ThreeHorizonsHomePage` |

**Props:**
```typescript
interface QuickAccessProps {
  links?: QuickLink[];
}

interface QuickLink {
  title: string;
  description: string;
  icon: React.ReactNode;
  route: string;
}
```

**Default links:**
1. Software Catalog -> `/catalog` (CategoryIcon)
2. API Explorer -> `/api-docs` (ExtensionIcon)
3. Create Component -> `/create` (CreateComponentIcon)
4. Documentation -> `/docs` (LibraryBooksIcon)

**Visual Requirements:**
- 4 cards in a row, each with icon + title + description
- Hover: elevation increase, pointer cursor
- Section title: "Quick Access"

---

### Component: FeaturedTemplates

| Field | Value |
|-------|-------|
| **Purpose** | Display 3 featured Golden Path templates with "Use Template" buttons |
| **Data Sources** | `catalogApiRef` (kind=Template, limit=3) |
| **Backstage APIs** | `catalogApiRef.getEntities()` |
| **Wiring** | Child of `ThreeHorizonsHomePage` |

**Props:**
```typescript
interface FeaturedTemplatesProps {
  limit?: number; // default: 3
}
```

**Data Fetching Hook: `useFeaturedTemplates(limit)`**
```typescript
// Returns { templates: TemplateEntity[], loading: boolean, error?: Error }
// Uses catalogApiRef.getEntities({ filter: { kind: 'Template' } })
// Takes first `limit` results
```

**Visual Requirements:**
- 3 cards in a row
- Each card: template title, description, tags, "Use Template" button
- Button links to `/create/templates/default/{template-name}`
- Section title: "Featured Templates"

---

### Component: TemplateCard (reusable)

| Field | Value |
|-------|-------|
| **Purpose** | Display a single template card with metadata and action button |
| **Data Sources** | Template entity passed via props |
| **Backstage APIs** | None (parent provides data) |
| **Wiring** | Used by `FeaturedTemplates` |

**Props:**
```typescript
interface TemplateCardProps {
  template: {
    name: string;
    description: string;
    tags: string[];
    type: string;
    entityRef: string;
  };
}
```

---

## Plugin 2: `@internal/plugin-my-group-dashboard`

### Component: GroupHeader

| Field | Value |
|-------|-------|
| **Purpose** | Display the current user's group info: name, description, member count |
| **Data Sources** | `catalogApiRef` (Group entity) |
| **Backstage APIs** | `catalogApiRef.getEntityByRef()` |
| **Wiring** | Child of `MyGroupDashboard` |

**Props:**
```typescript
interface GroupHeaderProps {
  groupRef: string; // e.g., "group:default/team-platform"
}
```

**Visual Requirements:**
- Group avatar (first letter circle or Gravatar)
- Group name: 28px bold
- Description: 16px #666
- Member count badge
- Full-width section, white background

---

### Component: GroupStats

| Field | Value |
|-------|-------|
| **Purpose** | Display 4 stat cards scoped to the current user's group |
| **Data Sources** | `catalogApiRef` filtered by `spec.owner` |
| **Backstage APIs** | `catalogApiRef.getEntities()` with owner filter |
| **Wiring** | Child of `MyGroupDashboard` |

**Props:**
```typescript
interface GroupStatsProps {
  groupRef: string;
}
```

**Reuses:** `StatCard` component from home-three-horizons plugin.

**Stats displayed:**
1. Components owned by group (blue)
2. Team members (green)
3. APIs owned by group (yellow)
4. Resources owned by group (red)

---

### Component: MemberList

| Field | Value |
|-------|-------|
| **Purpose** | Display a table of team members with avatar, name, role, and email |
| **Data Sources** | `catalogApiRef` (User entities with memberOf relation) |
| **Backstage APIs** | `catalogApiRef.getEntities()` |
| **Wiring** | Child of `MyGroupDashboard` |

**Props:**
```typescript
interface MemberListProps {
  groupRef: string;
}
```

**Data Fetching Hook: `useGroupMembers(groupRef)`**
```typescript
// Returns { members: UserEntity[], loading: boolean, error?: Error }
// Fetches User entities and filters by memberOf relation matching groupRef
```

**Table columns:**
| Column | Source |
|--------|--------|
| Avatar | `spec.profile.picture` or Gravatar |
| Name | `spec.profile.displayName` |
| Role | `spec.profile.role` or annotation |
| Email | `spec.profile.email` |

**Visual Requirements:**
- Use `<Table>` from `@backstage/core-components`
- Section title: "Team Members"
- Sortable by name

---

### Component: OwnedComponents

| Field | Value |
|-------|-------|
| **Purpose** | Display a table of components/APIs/resources owned by the group |
| **Data Sources** | `catalogApiRef` filtered by `spec.owner` |
| **Backstage APIs** | `catalogApiRef.getEntities()` |
| **Wiring** | Child of `MyGroupDashboard` |

**Props:**
```typescript
interface OwnedComponentsProps {
  groupRef: string;
}
```

**Data Fetching Hook: `useOwnedEntities(groupRef)`**
```typescript
// Returns { entities: Entity[], loading: boolean, error?: Error }
// Uses catalogApiRef.getEntities({
//   filter: { 'spec.owner': groupRef }
// })
```

**Table columns:**
| Column | Source |
|--------|--------|
| Name | `metadata.name` (link to entity page) |
| Kind | `kind` (Component, API, Resource) |
| Type | `spec.type` (service, website, library) |
| Lifecycle | `spec.lifecycle` (production, experimental) |
| System | `spec.system` |

**Visual Requirements:**
- Use `<Table>` from `@backstage/core-components`
- Section title: "Owned Components"
- Sortable, filterable
- Click on name navigates to entity detail page

---

## Decision Framework Summary — All 11 Pages

| # | Page | Decision | Solution | Effort |
|---|------|----------|----------|--------|
| 1 | **Home** | Custom plugin needed | `@internal/plugin-home-three-horizons` | 3-5 days |
| 2 | **My Group** | Custom plugin needed | `@internal/plugin-my-group-dashboard` | 2-3 days |
| 3 | **Catalog** | `app-config.yaml` + native plugin | Built-in, stat cards via mountPoint | 0.5 day |
| 4 | **APIs** | Native plugin | `@backstage/plugin-api-docs` + wiring config | 0.5 day |
| 5 | **Learning Paths** | TechDocs route (Phase 1), custom (Phase 2) | TechDocs subpage or custom plugin | 1-2 days |
| 6 | **Create** | 100% native | Built-in Scaffolder, just create templates | 0 days |
| 7 | **Docs** | 95% native | Built-in TechDocs | 0.5 day |
| 8 | **Lightspeed** | Enable dynamic plugin | `@redhat/backstage-plugin-lightspeed` | 0.5 day |
| 9 | **Notifications** | Enable dynamic plugin | `@backstage-community/plugin-notifications` | 0.5 day |
| 10 | **Administration** | Enable RBAC Web UI | `@janus-idp/backstage-plugin-rbac` | 0.5 day |
| 11 | **Settings** | 100% native | Built-in User Settings | 0 days |

**Total effort: 9-14 days** (excluding template creation and testing)
