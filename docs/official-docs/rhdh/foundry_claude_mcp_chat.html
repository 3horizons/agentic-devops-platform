<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3horizons AI Chat â€” Claude Sonnet 4.6 Extended Thinking via Azure AI Foundry</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Segoe UI', -apple-system, sans-serif; background: #f5f5f5; height: 100vh; display: flex; overflow: hidden; }

/* Sidebar */
.sidebar { width: 300px; min-width: 300px; background: #1a1a2e; color: #fff; display: flex; flex-direction: column; overflow-y: auto; }
.sidebar-header { padding: 20px; background: #16213e; border-bottom: 1px solid #0f3460; }
.sidebar-header h2 { font-size: 15px; font-weight: 600; color: #e0e0e0; }
.sidebar-header .model-badge { display: inline-flex; align-items: center; gap: 6px; margin-top: 8px; padding: 6px 12px; background: linear-gradient(135deg, #5C2D91, #0078D4); border-radius: 20px; font-size: 12px; font-weight: 600; }
.sidebar-header .model-badge .dot { width: 8px; height: 8px; border-radius: 50%; background: #00ff88; animation: pulse 2s infinite; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }

.sidebar-section { padding: 14px 16px; border-bottom: 1px solid rgba(255,255,255,0.05); }
.sidebar-section h3 { font-size: 10px; text-transform: uppercase; letter-spacing: 1.2px; color: #888; margin-bottom: 10px; }

.connection-status { display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: rgba(0,120,212,0.1); border-radius: 8px; border: 1px solid rgba(0,120,212,0.2); margin-bottom: 8px; }
.connection-status .icon { font-size: 13px; }
.connection-status .label { font-size: 11px; color: #aaa; }
.connection-status .value { font-size: 11px; font-weight: 600; color: #50e6ff; }

.tool-item { display: flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 8px; margin-bottom: 3px; cursor: pointer; transition: background 0.2s; }
.tool-item:hover { background: rgba(255,255,255,0.06); }
.tool-item .icon { width: 28px; height: 28px; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 13px; flex-shrink: 0; }
.tool-item .icon.catalog { background: rgba(16,124,16,0.2); }
.tool-item .icon.techdocs { background: rgba(0,120,212,0.2); }
.tool-item .icon.coverage { background: rgba(255,185,0,0.2); }
.tool-item .icon.content { background: rgba(92,45,145,0.2); }
.tool-item .info { flex: 1; }
.tool-item .info .name { font-size: 11px; font-weight: 600; color: #e0e0e0; }
.tool-item .info .desc { font-size: 9px; color: #888; margin-top: 1px; }

.quick-action { display: flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 8px; margin-bottom: 3px; cursor: pointer; transition: all 0.2s; border: 1px solid rgba(255,255,255,0.08); }
.quick-action:hover { background: rgba(0,120,212,0.15); border-color: rgba(0,120,212,0.3); }
.quick-action .emoji { font-size: 14px; }
.quick-action .text { font-size: 11px; color: #ccc; }

.arch-info { padding: 10px 12px; background: rgba(92,45,145,0.1); border-radius: 8px; border: 1px solid rgba(92,45,145,0.2); }
.arch-info .row { display: flex; justify-content: space-between; padding: 3px 0; font-size: 10px; }
.arch-info .row .label { color: #888; }
.arch-info .row .value { color: #ccc; font-weight: 600; }

/* Main Chat Area */
.main { flex: 1; display: flex; flex-direction: column; min-width: 0; }

/* Top Bar */
.topbar { padding: 10px 24px; background: #fff; border-bottom: 1px solid #e0e0e0; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; }
.topbar-left { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
.topbar-left h1 { font-size: 15px; font-weight: 700; color: #1a1a2e; }
.topbar-left .tag { padding: 2px 8px; border-radius: 12px; font-size: 10px; font-weight: 600; }
.topbar-left .tag.foundry { background: rgba(0,120,212,0.1); color: #0078D4; }
.topbar-left .tag.mcp { background: rgba(16,124,16,0.1); color: #107C10; }
.topbar-left .tag.preview { background: rgba(255,185,0,0.15); color: #b38600; }

/* Messages */
.messages { flex: 1; overflow-y: auto; padding: 20px 24px; }
.message { display: flex; gap: 10px; margin-bottom: 16px; max-width: 820px; animation: fadeIn 0.4s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
.message.user { flex-direction: row-reverse; margin-left: auto; }
.message .avatar { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.message.assistant .avatar { background: linear-gradient(135deg, #5C2D91, #0078D4); color: #fff; }
.message.user .avatar { background: #0078D4; color: #fff; }
.message.system .avatar { background: #FFB900; color: #1a1a2e; }
.bubble { padding: 12px 16px; border-radius: 14px; font-size: 13px; line-height: 1.6; }
.message.assistant .bubble { background: #fff; border: 1px solid #e5e5e5; color: #333; border-top-left-radius: 4px; }
.message.user .bubble { background: #0078D4; color: #fff; border-top-right-radius: 4px; }
.message.system .bubble { background: #fff8e1; border: 1px solid #ffe082; color: #5d4037; font-size: 12px; }

.bubble .tool-call { margin: 8px 0; padding: 8px 12px; background: #f8f8fc; border-left: 3px solid #5C2D91; border-radius: 0 8px 8px 0; font-size: 11px; }
.bubble .tool-call .tool-name { font-weight: 700; color: #5C2D91; font-size: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
.bubble .tool-call .tool-params { color: #666; margin-top: 3px; font-family: 'Cascadia Code', 'Consolas', monospace; font-size: 10px; white-space: pre-wrap; word-break: break-all; }
.bubble .tool-result { margin: 8px 0; padding: 10px 12px; background: #f0faf0; border-left: 3px solid #107C10; border-radius: 0 8px 8px 0; }
.bubble .tool-result .result-header { font-size: 10px; font-weight: 700; color: #107C10; text-transform: uppercase; letter-spacing: 0.5px; }

.bubble table { width: 100%; border-collapse: collapse; margin: 8px 0; font-size: 11px; }
.bubble th { background: #0078D4; color: #fff; padding: 6px 10px; text-align: left; font-weight: 600; font-size: 10px; text-transform: uppercase; }
.bubble td { padding: 6px 10px; border-bottom: 1px solid #eee; }
.bubble tr:hover td { background: #f5f8ff; }

.bubble .coverage-bar { display: flex; align-items: center; gap: 8px; margin: 4px 0; }
.bubble .coverage-bar .bar-label { min-width: 120px; font-size: 11px; font-weight: 600; }
.bubble .coverage-bar .bar { flex: 1; height: 6px; background: #e0e0e0; border-radius: 3px; overflow: hidden; }
.bubble .coverage-bar .bar .fill { height: 100%; border-radius: 3px; }
.bubble .coverage-bar .pct { font-size: 11px; font-weight: 700; min-width: 40px; text-align: right; }

.bubble .kpi-row { display: flex; gap: 8px; margin: 10px 0; }
.bubble .kpi { flex: 1; padding: 10px; border-radius: 10px; text-align: center; }
.bubble .kpi .kpi-value { font-size: 20px; font-weight: 700; }
.bubble .kpi .kpi-label { font-size: 9px; color: #666; margin-top: 3px; }
.bubble .kpi.blue { background: #e8f4ff; }
.bubble .kpi.blue .kpi-value { color: #0078D4; }
.bubble .kpi.green { background: #e8f7e8; }
.bubble .kpi.green .kpi-value { color: #107C10; }
.bubble .kpi.red { background: #fde8e8; }
.bubble .kpi.red .kpi-value { color: #D13438; }
.bubble .kpi.purple { background: #f3e8ff; }
.bubble .kpi.purple .kpi-value { color: #5C2D91; }
.bubble .kpi.yellow { background: #fff8e1; }
.bubble .kpi.yellow .kpi-value { color: #b38600; }

.bubble .action-buttons { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 10px; }
.bubble .action-btn { padding: 5px 12px; border-radius: 20px; border: 1px solid #ddd; background: #fff; font-size: 11px; cursor: pointer; transition: all 0.2s; color: #333; }
.bubble .action-btn:hover { border-color: #0078D4; color: #0078D4; background: #f0f6ff; }

.bubble code { background: #f4f4f4; padding: 1px 5px; border-radius: 3px; font-family: 'Cascadia Code', 'Consolas', monospace; font-size: 11px; }
.bubble pre { background: #1e1e1e; color: #d4d4d4; padding: 12px; border-radius: 8px; margin: 8px 0; overflow-x: auto; font-size: 11px; font-family: 'Cascadia Code', 'Consolas', monospace; line-height: 1.5; }
.bubble .dep-tree { font-family: 'Cascadia Code', 'Consolas', monospace; font-size: 11px; line-height: 1.6; background: #fafbfc; padding: 12px; border-radius: 8px; border: 1px solid #e0e0e0; margin: 8px 0; }
.bubble .compliance-item { display: flex; align-items: center; gap: 8px; padding: 6px 0; font-size: 12px; border-bottom: 1px solid #f0f0f0; }
.bubble .compliance-item:last-child { border-bottom: none; }
.bubble .compliance-badge { padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; }
.bubble .compliance-badge.pass { background: #e8f7e8; color: #107C10; }
.bubble .compliance-badge.warn { background: #fff8e1; color: #b38600; }
.bubble .compliance-badge.fail { background: #fde8e8; color: #D13438; }

/* Typing indicator */
.typing { display: flex; gap: 4px; padding: 6px 0; }
.typing span { width: 7px; height: 7px; border-radius: 50%; background: #999; animation: typingBounce 1.4s infinite; }
.typing span:nth-child(2) { animation-delay: 0.2s; }
.typing span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce { 0%,60%,100% { transform: translateY(0); } 30% { transform: translateY(-5px); } }

/* Input Area */
.input-area { padding: 12px 24px; background: #fff; border-top: 1px solid #e0e0e0; flex-shrink: 0; }
.input-box { display: flex; gap: 10px; max-width: 820px; margin: 0 auto; }
.input-box input { flex: 1; padding: 10px 16px; border: 2px solid #e0e0e0; border-radius: 24px; font-size: 13px; font-family: 'Segoe UI', sans-serif; outline: none; transition: border-color 0.2s; }
.input-box input:focus { border-color: #0078D4; }
.input-box button { padding: 10px 22px; background: linear-gradient(135deg, #5C2D91, #0078D4); color: #fff; border: none; border-radius: 24px; font-size: 13px; font-weight: 600; cursor: pointer; transition: transform 0.1s; font-family: 'Segoe UI', sans-serif; }
.input-box button:hover { transform: scale(1.02); }
.input-box button:active { transform: scale(0.98); }
.input-hint { text-align: center; margin-top: 6px; font-size: 10px; color: #999; }

/* Divider */
.demo-divider { display: flex; align-items: center; gap: 12px; margin: 20px 0; opacity: 0.5; }
.demo-divider .line { flex: 1; height: 1px; background: #ddd; }
.demo-divider .label { font-size: 10px; color: #999; text-transform: uppercase; letter-spacing: 1px; }
</style>
</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="sidebar-header">
    <h2>3horizons AI Chat</h2>
    <div class="model-badge">
      <span class="dot"></span>
      Claude Sonnet 4.6 Extended Thinking
    </div>
  </div>

  <!-- Connection Status -->
  <div class="sidebar-section">
    <h3>MCP Connections (10)</h3>
    <div class="connection-status">
      <span class="icon">ğŸ”—</span>
      <div>
        <div class="label">Azure AI Foundry</div>
        <div class="value">Connected â€” East US 2</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ—ï¸</span>
      <div>
        <div class="label">RHDH MCP Server</div>
        <div class="value">Connected â€” /api/mcp-actions/v1</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">â˜ï¸</span>
      <div>
        <div class="label">Azure MCP (40+ services)</div>
        <div class="value">Connected â€” AKS, ACR, KeyVault</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ”„</span>
      <div>
        <div class="label">Azure DevOps MCP</div>
        <div class="value">Connected â€” GA Â· 9 domains</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ™</span>
      <div>
        <div class="label">GitHub MCP</div>
        <div class="value">Connected â€” repos, PRs, issues</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ—ï¸</span>
      <div>
        <div class="label">Terraform MCP</div>
        <div class="value">Connected â€” registry, workspaces</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ¨</span>
      <div>
        <div class="label">Figma MCP</div>
        <div class="value">Connected â€” design-to-code</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ“</span>
      <div>
        <div class="label">Markitdown MCP</div>
        <div class="value">Connected â€” doc conversion</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ­</span>
      <div>
        <div class="label">Playwright MCP</div>
        <div class="value">Connected â€” UI validation</div>
      </div>
    </div>
    <div class="connection-status">
      <span class="icon">ğŸ“š</span>
      <div>
        <div class="label">MS Learn + Context7</div>
        <div class="value">Connected â€” live docs</div>
      </div>
    </div>
  </div>

  <!-- MCP Tools by Server -->
  <div class="sidebar-section">
    <h3>RHDH Catalog Tools</h3>
    <div class="tool-item" onclick="insertQuery('List all components in the catalog')">
      <div class="icon catalog">ğŸ“¦</div>
      <div class="info">
        <div class="name">fetch-catalog-entities</div>
        <div class="desc">Query Software Catalog entities</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Show TechDocs for payment-api')">
      <div class="icon techdocs">ğŸ“–</div>
      <div class="info">
        <div class="name">fetch-techdocs</div>
        <div class="desc">Retrieve TechDocs metadata</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Analyze documentation coverage')">
      <div class="icon coverage">ğŸ“Š</div>
      <div class="info">
        <div class="name">analyze-techdocs-coverage</div>
        <div class="desc">Analyze documentation coverage</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Retrieve docs content for auth-service')">
      <div class="icon content">ğŸ“„</div>
      <div class="info">
        <div class="name">retrieve-techdocs-content</div>
        <div class="desc">Get full documentation content</div>
      </div>
    </div>
  </div>

  <div class="sidebar-section">
    <h3>DevOps & Infra Tools</h3>
    <div class="tool-item" onclick="insertQuery('Show open PRs for rhdh-plugins repo')">
      <div class="icon" style="background:rgba(0,120,212,0.2)">ğŸ™</div>
      <div class="info">
        <div class="name">github:search-code</div>
        <div class="desc">Search repos, PRs, issues, code</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Show pipeline runs for rhdh-deploy')">
      <div class="icon" style="background:rgba(0,120,212,0.2)">ğŸ”„</div>
      <div class="info">
        <div class="name">ado:pipelines</div>
        <div class="desc">Azure DevOps pipelines & work items</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('List AKS clusters for rhdh')">
      <div class="icon" style="background:rgba(0,120,212,0.2)">â˜ï¸</div>
      <div class="info">
        <div class="name">azure:resources</div>
        <div class="desc">AKS, ACR, KeyVault, Monitor</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Show Terraform modules for AKS')">
      <div class="icon" style="background:rgba(92,45,145,0.2)">ğŸ—ï¸</div>
      <div class="info">
        <div class="name">terraform:registry</div>
        <div class="desc">Modules, providers, workspaces</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Convert legacy PDF docs to TechDocs markdown')">
      <div class="icon" style="background:rgba(16,124,16,0.2)">ğŸ“</div>
      <div class="info">
        <div class="name">markitdown:convert</div>
        <div class="desc">PDF/DOCX/PPTX to Markdown</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Run visual smoke test on RHDH portal home page')">
      <div class="icon" style="background:rgba(209,52,56,0.2)">ğŸ­</div>
      <div class="info">
        <div class="name">playwright:navigate</div>
        <div class="desc">Browser automation & UI tests</div>
      </div>
    </div>
    <div class="tool-item" onclick="insertQuery('Get Figma design context for home-page component')">
      <div class="icon" style="background:rgba(255,185,0,0.2)">ğŸ¨</div>
      <div class="info">
        <div class="name">figma:get-design-context</div>
        <div class="desc">Design-to-code, Code Connect</div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="sidebar-section">
    <h3>Quick Actions</h3>
    <div class="quick-action" onclick="insertQuery('Scaffold a new microservice using the golden-path template')">
      <span class="emoji">ğŸš€</span>
      <span class="text">Scaffold Service</span>
    </div>
    <div class="quick-action" onclick="insertQuery('Run a compliance audit on all production services')">
      <span class="emoji">ğŸ”</span>
      <span class="text">Compliance Audit</span>
    </div>
    <div class="quick-action" onclick="insertQuery('Show dependency graph for order-service')">
      <span class="emoji">ğŸ•¸ï¸</span>
      <span class="text">Dependency Map</span>
    </div>
    <div class="quick-action" onclick="insertQuery('Provision RHDH infra with Terraform')">
      <span class="emoji">ğŸ—ï¸</span>
      <span class="text">Provision Infra</span>
    </div>
    <div class="quick-action" onclick="insertQuery('Deploy plugins to AKS via Azure DevOps pipeline')">
      <span class="emoji">ğŸ”„</span>
      <span class="text">Deploy Plugins</span>
    </div>
    <div class="quick-action" onclick="insertQuery('Run Playwright visual regression on portal')">
      <span class="emoji">ğŸ­</span>
      <span class="text">UI Smoke Test</span>
    </div>
  </div>

  <!-- Architecture Info -->
  <div class="sidebar-section">
    <h3>Architecture</h3>
    <div class="arch-info">
      <div class="row"><span class="label">Model</span><span class="value">Claude Sonnet 4.6 Extended Thinking</span></div>
      <div class="row"><span class="label">Provider</span><span class="value">Anthropic via Azure AI Foundry</span></div>
      <div class="row"><span class="label">Context</span><span class="value">200K tokens + Extended Thinking</span></div>
      <div class="row"><span class="label">Transport</span><span class="value">Streamable HTTP</span></div>
      <div class="row"><span class="label">Auth</span><span class="value">Entra ID + Bearer</span></div>
      <div class="row"><span class="label">MCP Servers</span><span class="value">10 connected</span></div>
      <div class="row"><span class="label">RHDH</span><span class="value">v1.8 Developer Preview</span></div>
    </div>
  </div>
</div>

<!-- MAIN CHAT -->
<div class="main">
  <div class="topbar">
    <div class="topbar-left">
      <h1>3horizons AI Chat</h1>
      <span class="tag foundry">Azure AI Foundry</span>
      <span class="tag mcp">MCP v1</span>
      <span class="tag preview">Developer Preview</span>
    </div>
  </div>

  <div class="messages" id="messages">

    <!-- Welcome Message -->
    <div class="message system">
      <div class="avatar">âš¡</div>
      <div class="bubble">
        <strong>3horizons AI Assistant</strong> powered by <strong>Claude Sonnet 4.6 Extended Thinking</strong> via Azure AI Foundry Agent Service.<br>
        Connected to <strong>10 MCP servers</strong>: RHDH Catalog &amp; TechDocs, Azure (40+ services), Azure DevOps, GitHub, Terraform, Figma, Markitdown, Playwright, MS Learn, and Context7.<br>
        Ask me anything about your services, infrastructure, pipelines, design, or platform standards.
      </div>
    </div>

    <!-- DEMO 1: Catalog List -->
    <div class="message user">
      <div class="avatar">ğŸ‘¤</div>
      <div class="bubble">List all components in the catalog</div>
    </div>

    <div class="message assistant">
      <div class="avatar">ğŸ¤–</div>
      <div class="bubble">
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div>
          <div class="tool-params">{ "filter": "kind=component", "fields": ["metadata.name","spec.type","spec.owner","spec.lifecycle"] }</div>
        </div>
        <div class="tool-result">
          <div class="result-header">âœ… 10 entities returned in 340ms</div>
        </div>
        <p style="margin:8px 0">Here are all <strong>10 components</strong> registered in the Software Catalog:</p>
        <table>
          <tr><th>Component</th><th>Type</th><th>Owner</th><th>Lifecycle</th><th>Language</th><th>Docs</th></tr>
          <tr><td><strong>payment-api</strong></td><td>service</td><td>team-payments</td><td>production</td><td>Java</td><td>âœ…</td></tr>
          <tr><td><strong>order-service</strong></td><td>service</td><td>team-orders</td><td>production</td><td>Go</td><td>âœ…</td></tr>
          <tr><td><strong>auth-service</strong></td><td>service</td><td>team-platform</td><td>production</td><td>Python</td><td>âœ…</td></tr>
          <tr><td><strong>user-service</strong></td><td>service</td><td>team-platform</td><td>production</td><td>TypeScript</td><td>âš ï¸</td></tr>
          <tr><td><strong>notification-hub</strong></td><td>service</td><td>team-comms</td><td>production</td><td>C#</td><td>âš ï¸</td></tr>
          <tr><td><strong>inventory-api</strong></td><td>service</td><td>team-supply</td><td>production</td><td>Java</td><td>âœ…</td></tr>
          <tr><td><strong>analytics-engine</strong></td><td>service</td><td>team-data</td><td>experimental</td><td>Python</td><td>âš ï¸</td></tr>
          <tr><td><strong>search-service</strong></td><td>service</td><td>team-platform</td><td>production</td><td>Rust</td><td>âœ…</td></tr>
          <tr><td><strong>billing-service</strong></td><td>service</td><td>team-payments</td><td>production</td><td>Java</td><td>âš ï¸</td></tr>
          <tr><td><strong>shipping-tracker</strong></td><td>service</td><td>team-logistics</td><td>production</td><td>Go</td><td>âœ…</td></tr>
        </table>
        <div class="kpi-row">
          <div class="kpi blue"><div class="kpi-value">10</div><div class="kpi-label">Total Components</div></div>
          <div class="kpi green"><div class="kpi-value">9</div><div class="kpi-label">In Production</div></div>
          <div class="kpi purple"><div class="kpi-value">6</div><div class="kpi-label">Teams</div></div>
          <div class="kpi red"><div class="kpi-value">4</div><div class="kpi-label">Missing Docs</div></div>
        </div>
        <div class="action-buttons">
          <button class="action-btn" onclick="insertQuery('Analyze documentation coverage for all components');sendMessage()">ğŸ“Š Analyze Coverage</button>
          <button class="action-btn" onclick="insertQuery('Show all APIs in the catalog');sendMessage()">ğŸ”Œ View APIs</button>
          <button class="action-btn" onclick="insertQuery('Run compliance audit');sendMessage()">ğŸ” Compliance Audit</button>
        </div>
      </div>
    </div>

    <!-- DEMO 2: Coverage Analysis -->
    <div class="message user">
      <div class="avatar">ğŸ‘¤</div>
      <div class="bubble">Analyze documentation coverage for all components</div>
    </div>

    <div class="message assistant">
      <div class="avatar">ğŸ¤–</div>
      <div class="bubble">
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: analyze-techdocs-coverage</div>
          <div class="tool-params">{ "filter": "kind=component", "includeMetrics": true }</div>
        </div>
        <div class="tool-result">
          <div class="result-header">âœ… Coverage analysis complete â€” 10 entities scanned in 520ms</div>
        </div>

        <div class="kpi-row">
          <div class="kpi blue"><div class="kpi-value">10</div><div class="kpi-label">Components</div></div>
          <div class="kpi green"><div class="kpi-value">6</div><div class="kpi-label">With TechDocs</div></div>
          <div class="kpi red"><div class="kpi-value">4</div><div class="kpi-label">Missing Docs</div></div>
          <div class="kpi yellow"><div class="kpi-value">60%</div><div class="kpi-label">Overall Coverage</div></div>
        </div>

        <p style="margin:8px 0"><strong>Per-component TechDocs coverage:</strong></p>

        <div class="coverage-bar"><span class="bar-label">payment-api</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">order-service</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">auth-service</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">inventory-api</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">search-service</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">shipping-tracker</span><div class="bar"><div class="fill" style="width:100%;background:#107C10"></div></div><span class="pct" style="color:#107C10">100%</span></div>
        <div class="coverage-bar"><span class="bar-label">user-service</span><div class="bar"><div class="fill" style="width:0%;background:#D13438"></div></div><span class="pct" style="color:#D13438">0%</span></div>
        <div class="coverage-bar"><span class="bar-label">notification-hub</span><div class="bar"><div class="fill" style="width:0%;background:#D13438"></div></div><span class="pct" style="color:#D13438">0%</span></div>
        <div class="coverage-bar"><span class="bar-label">analytics-engine</span><div class="bar"><div class="fill" style="width:0%;background:#D13438"></div></div><span class="pct" style="color:#D13438">0%</span></div>
        <div class="coverage-bar"><span class="bar-label">billing-service</span><div class="bar"><div class="fill" style="width:0%;background:#D13438"></div></div><span class="pct" style="color:#D13438">0%</span></div>

        <p style="margin:10px 0;font-size:12px;color:#666"><strong>Recommendation:</strong> 4 services lack TechDocs. Prioritize <code>user-service</code> and <code>billing-service</code> (both production, high traffic).</p>
        <div class="action-buttons">
          <button class="action-btn" onclick="insertQuery('Generate TechDocs for user-service');sendMessage()">ğŸ“ Generate Docs for user-service</button>
          <button class="action-btn" onclick="insertQuery('Generate TechDocs for billing-service');sendMessage()">ğŸ“ Generate Docs for billing-service</button>
        </div>
      </div>
    </div>

    <!-- DEMO 3: Dependency Graph -->
    <div class="message user">
      <div class="avatar">ğŸ‘¤</div>
      <div class="bubble">Show dependency graph for order-service</div>
    </div>

    <div class="message assistant">
      <div class="avatar">ğŸ¤–</div>
      <div class="bubble">
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div>
          <div class="tool-params">{ "filter": "metadata.name=order-service", "fields": ["spec.dependsOn","spec.consumesApis","spec.providesApis"] }</div>
        </div>
        <div class="tool-result">
          <div class="result-header">âœ… Dependency tree resolved â€” 3 levels deep in 280ms</div>
        </div>

        <p style="margin:8px 0"><strong>Dependency tree for <code>order-service</code>:</strong></p>
        <div class="dep-tree">
ğŸ“¦ <strong>order-service</strong> (Go Â· team-orders Â· production)<br>
â”œâ”€â”€ ğŸ”— <strong>payment-api</strong> (Java Â· team-payments)<br>
â”‚&nbsp;&nbsp;&nbsp;â”œâ”€â”€ ğŸ’³ payment-api-v2 (OpenAPI 3.1)<br>
â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€ ğŸ” auth-service (Python Â· team-platform)<br>
â”œâ”€â”€ ğŸ”— <strong>inventory-api</strong> (Java Â· team-supply)<br>
â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€ ğŸ“Š inventory-events (AsyncAPI 2.6)<br>
â”œâ”€â”€ ğŸ”— <strong>notification-hub</strong> (C# Â· team-comms)<br>
â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€ âš ï¸ <em>Missing TechDocs</em><br>
â”œâ”€â”€ ğŸ“¡ <strong>order-events</strong> (AsyncAPI 2.6 Â· published)<br>
â””â”€â”€ ğŸ” <strong>auth-grpc</strong> (gRPC/Protobuf Â· consumed)
        </div>

        <div class="kpi-row">
          <div class="kpi blue"><div class="kpi-value">3</div><div class="kpi-label">Direct Deps</div></div>
          <div class="kpi green"><div class="kpi-value">2</div><div class="kpi-label">APIs Consumed</div></div>
          <div class="kpi purple"><div class="kpi-value">1</div><div class="kpi-label">API Published</div></div>
          <div class="kpi red"><div class="kpi-value">1</div><div class="kpi-label">Undocumented Dep</div></div>
        </div>
        <div class="action-buttons">
          <button class="action-btn" onclick="insertQuery('Show TechDocs for payment-api');sendMessage()">ğŸ“– payment-api Docs</button>
          <button class="action-btn" onclick="insertQuery('Show dependency graph for auth-service');sendMessage()">ğŸ•¸ï¸ auth-service Graph</button>
        </div>
      </div>
    </div>

    <!-- DEMO 4: Compliance Audit -->
    <div class="message user">
      <div class="avatar">ğŸ‘¤</div>
      <div class="bubble">Run a compliance audit on all production services</div>
    </div>

    <div class="message assistant">
      <div class="avatar">ğŸ¤–</div>
      <div class="bubble">
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div>
          <div class="tool-params">{ "filter": "kind=component,spec.lifecycle=production", "fields": ["metadata.annotations","spec.owner","spec.system"] }</div>
        </div>
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: analyze-techdocs-coverage</div>
          <div class="tool-params">{ "filter": "spec.lifecycle=production" }</div>
        </div>
        <div class="tool-result">
          <div class="result-header">âœ… Compliance audit complete â€” 9 production services scanned in 890ms</div>
        </div>

        <p style="margin:8px 0"><strong>Golden-Path Compliance Audit â€” Production Services:</strong></p>

        <table>
          <tr><th>Service</th><th>TechDocs</th><th>CI/CD</th><th>RBAC</th><th>API Spec</th><th>Score</th></tr>
          <tr><td><strong>payment-api</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#107C10">100%</strong></td></tr>
          <tr><td><strong>order-service</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#107C10">100%</strong></td></tr>
          <tr><td><strong>auth-service</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#107C10">100%</strong></td></tr>
          <tr><td><strong>search-service</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge warn">WARN</span></td><td><strong style="color:#b38600">75%</strong></td></tr>
          <tr><td><strong>inventory-api</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge warn">WARN</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#b38600">75%</strong></td></tr>
          <tr><td><strong>shipping-tracker</strong></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge warn">WARN</span></td><td><span class="compliance-badge warn">WARN</span></td><td><strong style="color:#b38600">50%</strong></td></tr>
          <tr><td><strong>user-service</strong></td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#b38600">75%</strong></td></tr>
          <tr><td><strong>notification-hub</strong></td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge warn">WARN</span></td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge fail">FAIL</span></td><td><strong style="color:#D13438">0%</strong></td></tr>
          <tr><td><strong>billing-service</strong></td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge warn">WARN</span></td><td><span class="compliance-badge warn">WARN</span></td><td><strong style="color:#D13438">25%</strong></td></tr>
        </table>

        <div class="kpi-row">
          <div class="kpi green"><div class="kpi-value">3</div><div class="kpi-label">Fully Compliant</div></div>
          <div class="kpi yellow"><div class="kpi-value">4</div><div class="kpi-label">Partial</div></div>
          <div class="kpi red"><div class="kpi-value">2</div><div class="kpi-label">Non-Compliant</div></div>
          <div class="kpi blue"><div class="kpi-value">67%</div><div class="kpi-label">Avg Score</div></div>
        </div>

        <p style="margin:10px 0;font-size:12px;color:#666"><strong>Top priority:</strong> <code>notification-hub</code> (0% compliance) needs TechDocs, RBAC config, and API spec. <code>billing-service</code> (25%) needs TechDocs and API spec updates.</p>

        <div class="action-buttons">
          <button class="action-btn" onclick="insertQuery('Generate TechDocs for notification-hub');sendMessage()">ğŸ“ Fix notification-hub</button>
          <button class="action-btn" onclick="insertQuery('Generate TechDocs for billing-service');sendMessage()">ğŸ“ Fix billing-service</button>
          <button class="action-btn" onclick="insertQuery('Scaffold RBAC config for notification-hub');sendMessage()">ğŸ” Add RBAC</button>
        </div>
      </div>
    </div>

    <!-- DEMO 5: TechDocs Retrieval -->
    <div class="message user">
      <div class="avatar">ğŸ‘¤</div>
      <div class="bubble">Show TechDocs for payment-api</div>
    </div>

    <div class="message assistant">
      <div class="avatar">ğŸ¤–</div>
      <div class="bubble">
        <div class="tool-call">
          <div class="tool-name">ğŸ”§ Tool Call: retrieve-techdocs-content</div>
          <div class="tool-params">{ "entityRef": "component:default/payment-api", "path": "/" }</div>
        </div>
        <div class="tool-result">
          <div class="result-header">âœ… TechDocs content retrieved â€” 4 sections, 12 pages in 410ms</div>
        </div>

        <p style="margin:8px 0"><strong>TechDocs: payment-api</strong> â€” <code>component:default/payment-api</code></p>

        <table>
          <tr><th>Section</th><th>Pages</th><th>Last Updated</th><th>Status</th></tr>
          <tr><td>ğŸ“– Overview & Architecture</td><td>3</td><td>2025-11-28</td><td><span class="compliance-badge pass">Current</span></td></tr>
          <tr><td>ğŸ”Œ API Reference (OpenAPI 3.1)</td><td>4</td><td>2025-12-02</td><td><span class="compliance-badge pass">Current</span></td></tr>
          <tr><td>ğŸš€ Deployment Guide</td><td>2</td><td>2025-10-15</td><td><span class="compliance-badge warn">Stale</span></td></tr>
          <tr><td>ğŸ§ª Testing & Runbook</td><td>3</td><td>2025-12-01</td><td><span class="compliance-badge pass">Current</span></td></tr>
        </table>

        <p style="margin:8px 0;font-size:12px"><strong>Summary:</strong> Payment API v2 is a Java 21 microservice on Spring Boot 3.3, deployed via Helm chart to AKS. Handles credit card, PIX, and wire transfer processing. Connected to <code>order-service</code> via AsyncAPI events and secured with mTLS + RBAC.</p>

        <pre><span style="color:#569CD6">POST</span> /api/v2/payments
<span style="color:#569CD6">GET</span>  /api/v2/payments/{id}
<span style="color:#569CD6">POST</span> /api/v2/payments/{id}/refund
<span style="color:#569CD6">GET</span>  /api/v2/payments/health
<span style="color:#569CD6">GET</span>  /api/v2/payments/metrics</pre>

        <div class="action-buttons">
          <button class="action-btn" onclick="insertQuery('Show dependency graph for payment-api');sendMessage()">ğŸ•¸ï¸ Dependencies</button>
          <button class="action-btn" onclick="insertQuery('List all APIs in the catalog');sendMessage()">ğŸ”Œ All APIs</button>
        </div>
      </div>
    </div>

  </div>

  <div class="input-area">
    <div class="input-box">
      <input type="text" id="userInput" placeholder="Ask about your services, APIs, docs..." onkeydown="if(event.key==='Enter')sendMessage()">
      <button onclick="sendMessage()">Send</button>
    </div>
    <div class="input-hint">Claude Sonnet 4.6 Extended Thinking Â· Azure AI Foundry Â· 10 MCP Servers Â· Streamable HTTP</div>
  </div>
</div>

<script>
const messagesEl = document.getElementById('messages');
const inputEl = document.getElementById('userInput');

const catalog = {
  components: [
    { name: 'payment-api', type: 'service', owner: 'team-payments', lifecycle: 'production', techdocs: true, lang: 'Java' },
    { name: 'order-service', type: 'service', owner: 'team-orders', lifecycle: 'production', techdocs: true, lang: 'Go' },
    { name: 'auth-service', type: 'service', owner: 'team-platform', lifecycle: 'production', techdocs: true, lang: 'Python' },
    { name: 'user-service', type: 'service', owner: 'team-platform', lifecycle: 'production', techdocs: false, lang: 'TypeScript' },
    { name: 'notification-hub', type: 'service', owner: 'team-comms', lifecycle: 'production', techdocs: false, lang: 'C#' },
    { name: 'inventory-api', type: 'service', owner: 'team-supply', lifecycle: 'production', techdocs: true, lang: 'Java' },
    { name: 'analytics-engine', type: 'service', owner: 'team-data', lifecycle: 'experimental', techdocs: false, lang: 'Python' },
    { name: 'search-service', type: 'service', owner: 'team-platform', lifecycle: 'production', techdocs: true, lang: 'Rust' },
    { name: 'billing-service', type: 'service', owner: 'team-payments', lifecycle: 'production', techdocs: false, lang: 'Java' },
    { name: 'shipping-tracker', type: 'service', owner: 'team-logistics', lifecycle: 'production', techdocs: true, lang: 'Go' },
  ],
  apis: [
    { name: 'payment-api-v2', type: 'openapi', owner: 'team-payments', spec: 'OpenAPI 3.1' },
    { name: 'order-events', type: 'asyncapi', owner: 'team-orders', spec: 'AsyncAPI 2.6' },
    { name: 'auth-grpc', type: 'grpc', owner: 'team-platform', spec: 'gRPC/Protobuf' },
    { name: 'user-graphql', type: 'graphql', owner: 'team-platform', spec: 'GraphQL SDL' },
  ]
};

function insertQuery(text) { inputEl.value = text; inputEl.focus(); }

function addMessage(role, content) {
  const div = document.createElement('div');
  div.className = `message ${role}`;
  const avatarIcon = role === 'user' ? 'ğŸ‘¤' : role === 'system' ? 'âš¡' : 'ğŸ¤–';
  div.innerHTML = `<div class="avatar">${avatarIcon}</div><div class="bubble">${content}</div>`;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function showTyping() {
  const div = document.createElement('div');
  div.className = 'message assistant'; div.id = 'typing-indicator';
  div.innerHTML = `<div class="avatar">ğŸ¤–</div><div class="bubble"><div class="typing"><span></span><span></span><span></span></div></div>`;
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function removeTyping() { const el = document.getElementById('typing-indicator'); if (el) el.remove(); }

function sendMessage() {
  const text = inputEl.value.trim();
  if (!text) return;
  addMessage('user', text);
  inputEl.value = '';
  showTyping();
  setTimeout(() => { removeTyping(); processQuery(text); }, 1200 + Math.random() * 800);
}

function processQuery(query) {
  const q = query.toLowerCase();
  if (q.includes('list') && q.includes('component') || q.includes('catalog') || q.includes('all services')) { respondCatalogList(); }
  else if (q.includes('coverage') || q.includes('techdocs coverage')) { respondCoverage(); }
  else if (q.includes('dependency') || q.includes('depends') || q.includes('graph')) { respondDependency(query); }
  else if (q.includes('api') && (q.includes('list') || q.includes('show') || q.includes('all'))) { respondApiList(); }
  else if (q.includes('compliance') || q.includes('audit') || q.includes('golden-path')) { respondComplianceAudit(); }
  else if (q.includes('scaffold') || q.includes('template') || q.includes('create service')) { respondScaffold(); }
  else if (q.includes('techdocs') || q.includes('docs for') || q.includes('documentation for') || q.includes('show techdocs')) { respondTechDocs(query); }
  else if (q.includes('generate') && q.includes('doc')) { respondGenerateDocs(query); }
  else { respondGeneral(query); }
}

function respondCatalogList() {
  let rows = catalog.components.map(c => `<tr><td><strong>${c.name}</strong></td><td>${c.type}</td><td>${c.owner}</td><td>${c.lifecycle}</td><td>${c.lang}</td><td>${c.techdocs ? 'âœ…' : 'âš ï¸'}</td></tr>`).join('');
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div><div class="tool-params">{ "filter": "kind=component" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… ${catalog.components.length} entities returned in 340ms</div></div>
    <p style="margin:8px 0">All <strong>${catalog.components.length} components</strong> in the Software Catalog:</p>
    <table><tr><th>Component</th><th>Type</th><th>Owner</th><th>Lifecycle</th><th>Language</th><th>Docs</th></tr>${rows}</table>
    <div class="kpi-row">
      <div class="kpi blue"><div class="kpi-value">${catalog.components.length}</div><div class="kpi-label">Total</div></div>
      <div class="kpi green"><div class="kpi-value">${catalog.components.filter(c=>c.lifecycle==='production').length}</div><div class="kpi-label">Production</div></div>
      <div class="kpi purple"><div class="kpi-value">${new Set(catalog.components.map(c=>c.owner)).size}</div><div class="kpi-label">Teams</div></div>
      <div class="kpi red"><div class="kpi-value">${catalog.components.filter(c=>!c.techdocs).length}</div><div class="kpi-label">Missing Docs</div></div>
    </div>
    <div class="action-buttons">
      <button class="action-btn" onclick="insertQuery('Analyze documentation coverage');sendMessage()">ğŸ“Š Coverage</button>
      <button class="action-btn" onclick="insertQuery('Show all APIs');sendMessage()">ğŸ”Œ APIs</button>
    </div>`);
}

function respondCoverage() {
  const total = catalog.components.length;
  const withDocs = catalog.components.filter(c => c.techdocs).length;
  let bars = catalog.components.map(c => {
    const color = c.techdocs ? '#107C10' : '#D13438';
    return `<div class="coverage-bar"><span class="bar-label">${c.name}</span><div class="bar"><div class="fill" style="width:${c.techdocs?100:0}%;background:${color}"></div></div><span class="pct" style="color:${color}">${c.techdocs?'âœ… Yes':'âŒ No'}</span></div>`;
  }).join('');
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: analyze-techdocs-coverage</div><div class="tool-params">{ "filter": "kind=component" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… Coverage analysis â€” ${total} entities in 520ms</div></div>
    <div class="kpi-row">
      <div class="kpi blue"><div class="kpi-value">${total}</div><div class="kpi-label">Total</div></div>
      <div class="kpi green"><div class="kpi-value">${withDocs}</div><div class="kpi-label">Documented</div></div>
      <div class="kpi red"><div class="kpi-value">${total-withDocs}</div><div class="kpi-label">Missing</div></div>
      <div class="kpi yellow"><div class="kpi-value">${Math.round(withDocs/total*100)}%</div><div class="kpi-label">Coverage</div></div>
    </div>${bars}`);
}

function respondDependency(query) {
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div><div class="tool-params">{ "filter": "metadata.name=order-service", "fields": ["spec.dependsOn"] }</div></div>
    <div class="tool-result"><div class="result-header">âœ… Dependencies resolved in 280ms</div></div>
    <div class="dep-tree">ğŸ“¦ <strong>order-service</strong> (Go)<br>â”œâ”€â”€ ğŸ”— payment-api (Java)<br>â”‚&nbsp;&nbsp;&nbsp;â””â”€â”€ ğŸ” auth-service (Python)<br>â”œâ”€â”€ ğŸ”— inventory-api (Java)<br>â””â”€â”€ ğŸ”— notification-hub (C#)<br>&nbsp;&nbsp;&nbsp;&nbsp;â””â”€â”€ âš ï¸ <em>Missing TechDocs</em></div>`);
}

function respondApiList() {
  let rows = catalog.apis.map(a => `<tr><td><strong>${a.name}</strong></td><td>${a.type}</td><td>${a.owner}</td><td><code>${a.spec}</code></td></tr>`).join('');
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div><div class="tool-params">{ "filter": "kind=api" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… ${catalog.apis.length} APIs returned in 190ms</div></div>
    <table><tr><th>API</th><th>Type</th><th>Owner</th><th>Spec</th></tr>${rows}</table>`);
}

function respondComplianceAudit() {
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities + analyze-techdocs-coverage</div><div class="tool-params">{ "filter": "spec.lifecycle=production" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… Compliance audit â€” 9 services in 890ms</div></div>
    <table>
      <tr><th>Service</th><th>Docs</th><th>CI/CD</th><th>RBAC</th><th>API</th><th>Score</th></tr>
      <tr><td>payment-api</td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#107C10">100%</strong></td></tr>
      <tr><td>order-service</td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><span class="compliance-badge pass">PASS</span></td><td><strong style="color:#107C10">100%</strong></td></tr>
      <tr><td>notification-hub</td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge warn">WARN</span></td><td><span class="compliance-badge fail">FAIL</span></td><td><span class="compliance-badge fail">FAIL</span></td><td><strong style="color:#D13438">0%</strong></td></tr>
    </table>
    <div class="kpi-row">
      <div class="kpi green"><div class="kpi-value">3</div><div class="kpi-label">Compliant</div></div>
      <div class="kpi yellow"><div class="kpi-value">4</div><div class="kpi-label">Partial</div></div>
      <div class="kpi red"><div class="kpi-value">2</div><div class="kpi-label">Non-Compliant</div></div>
    </div>`);
}

function respondScaffold() {
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities</div><div class="tool-params">{ "filter": "kind=template,spec.type=service" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… 6 golden-path templates found in 150ms</div></div>
    <p style="margin:8px 0"><strong>Available Templates:</strong></p>
    <table>
      <tr><th>Template</th><th>Language</th><th>Includes</th></tr>
      <tr><td>ğŸŸ¢ spring-boot-service</td><td>Java 21</td><td>CI/CD, TechDocs, RBAC, Helm</td></tr>
      <tr><td>ğŸ”µ go-microservice</td><td>Go 1.22</td><td>CI/CD, TechDocs, RBAC, Dockerfile</td></tr>
      <tr><td>ğŸŸ¡ python-fastapi</td><td>Python 3.12</td><td>CI/CD, TechDocs, OpenAPI</td></tr>
      <tr><td>ğŸŸ£ dotnet-service</td><td>C# / .NET 8</td><td>CI/CD, TechDocs, RBAC</td></tr>
      <tr><td>ğŸ”´ ts-express-api</td><td>TypeScript</td><td>CI/CD, TechDocs, GraphQL</td></tr>
      <tr><td>ğŸŸ¤ rust-actix</td><td>Rust</td><td>CI/CD, TechDocs, gRPC</td></tr>
    </table>
    <p style="margin:8px 0;font-size:12px;color:#666">All templates include: catalog-info.yaml, GitHub Actions pipeline, TechDocs scaffolding, and Kubernetes manifests.</p>`);
}

function respondTechDocs(query) {
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: retrieve-techdocs-content</div><div class="tool-params">{ "entityRef": "component:default/payment-api", "path": "/" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… TechDocs content â€” 4 sections, 12 pages in 410ms</div></div>
    <table>
      <tr><th>Section</th><th>Pages</th><th>Updated</th><th>Status</th></tr>
      <tr><td>ğŸ“– Architecture</td><td>3</td><td>2025-11-28</td><td><span class="compliance-badge pass">Current</span></td></tr>
      <tr><td>ğŸ”Œ API Reference</td><td>4</td><td>2025-12-02</td><td><span class="compliance-badge pass">Current</span></td></tr>
      <tr><td>ğŸš€ Deployment</td><td>2</td><td>2025-10-15</td><td><span class="compliance-badge warn">Stale</span></td></tr>
      <tr><td>ğŸ§ª Runbook</td><td>3</td><td>2025-12-01</td><td><span class="compliance-badge pass">Current</span></td></tr>
    </table>
    <pre><span style="color:#569CD6">POST</span> /api/v2/payments\n<span style="color:#569CD6">GET</span>  /api/v2/payments/{id}\n<span style="color:#569CD6">POST</span> /api/v2/payments/{id}/refund</pre>`);
}

function respondGenerateDocs(query) {
  addMessage('assistant', `
    <div class="tool-call"><div class="tool-name">ğŸ”§ Tool Call: fetch-catalog-entities + retrieve-techdocs-content</div><div class="tool-params">{ "entityRef": "component:default/user-service" }</div></div>
    <div class="tool-result"><div class="result-header">âœ… Auto-generated TechDocs scaffold in 1.2s</div></div>
    <p style="margin:8px 0"><strong>Generated TechDocs for user-service:</strong></p>
    <pre>docs/
â”œâ”€â”€ index.md          # Service Overview
â”œâ”€â”€ architecture.md   # Component Diagram + ADRs
â”œâ”€â”€ api-reference.md  # OpenAPI auto-generated
â”œâ”€â”€ deployment.md     # Helm + AKS config
â””â”€â”€ runbook.md        # Alerts + Playbooks</pre>
    <p style="margin:8px 0;font-size:12px;color:#666">TechDocs scaffold created. Run <code>npx @techdocs/cli generate</code> to build and publish.</p>`);
}

function respondGeneral(query) {
  addMessage('assistant', `I can help with that! Try one of these queries:
    <div class="action-buttons" style="margin-top:8px">
      <button class="action-btn" onclick="insertQuery('List all components in the catalog');sendMessage()">ğŸ“¦ Catalog</button>
      <button class="action-btn" onclick="insertQuery('Analyze documentation coverage');sendMessage()">ğŸ“Š Coverage</button>
      <button class="action-btn" onclick="insertQuery('Run compliance audit');sendMessage()">ğŸ” Audit</button>
      <button class="action-btn" onclick="insertQuery('Show dependency graph for order-service');sendMessage()">ğŸ•¸ï¸ Dependencies</button>
    </div>`);
}
</script>
</body>
</html>
