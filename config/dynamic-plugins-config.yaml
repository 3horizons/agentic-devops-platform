# ============================================================
# Three Horizons Portal — Dynamic Plugins Configuration
# Copy this into your dynamic-plugins-config.yaml
#
# 13 sidebar pages (in order):
#   1.  Home               → HomeIcon               → /
#   2.  My Group            → GroupIcon              → /my-group
#   3.  Catalog             → CategoryIcon           → /catalog
#   4.  APIs                → ExtensionIcon          → /api-docs
#   5.  Create              → CreateComponentIcon    → /create
#   6.  Docs                → LibraryBooksIcon       → /docs
#   7.  Lightspeed          → ChatIcon               → /lightspeed
#   8.  Copilot Metrics     → AssessmentIcon         → /copilot-metrics
#   9.  GHAS Metrics        → SecurityIcon           → /ghas-metrics
#  10.  Notifications       → NotificationsIcon      → /notifications
#  11.  Administration      → AdminPanelSettingsIcon → /admin/rbac
#  12.  Settings            → SettingsIcon           → /settings
#  13.  Topology            → StorageIcon            → /topology
# ============================================================

dynamicPlugins:
  frontend:

    # ── 1. Home — Custom Three Horizons Home Page ────────────
    "@internal/plugin-home-three-horizons":
      dynamicRoutes:
        - path: /
          importName: ThreeHorizonsHomePage
          menuItem:
            icon: HomeIcon
            text: Home

    # ── 2. My Group — Custom Team Dashboard ──────────────────
    "@internal/plugin-my-group-dashboard":
      dynamicRoutes:
        - path: /my-group
          importName: MyGroupDashboard
          menuItem:
            icon: GroupIcon
            text: My Group

    # ── 3. Catalog (native — built-in sidebar entry) ─────────
    # Catalog is 100% native; sidebar entry is built-in.

    # ── 4. APIs — API Docs Plugin ────────────────────────────
    "@backstage/plugin-api-docs":
      dynamicRoutes:
        - path: /api-docs
          importName: ApiExplorerPage
          menuItem:
            icon: ExtensionIcon
            text: APIs

    # ── 5. Create — Native Scaffolder (built-in) ─────────────
    # No additional config needed — Scaffolder is built-in.

    # ── 6. Docs — TechDocs Plugin ────────────────────────────
    "@backstage/plugin-techdocs":
      dynamicRoutes:
        - path: /docs
          importName: TechDocsIndexPage
          menuItem:
            icon: LibraryBooksIcon
            text: Docs

    # ── 7. Lightspeed — AI Chat ──────────────────────────────
    "@redhat/backstage-plugin-lightspeed":
      dynamicRoutes:
        - path: /lightspeed
          importName: LightspeedPage
          menuItem:
            icon: ChatIcon
            text: Lightspeed

    # ── 8. Copilot Metrics — Custom Dashboard ────────────────
    # Requires backend proxy to GitHub REST API
    "@internal/plugin-copilot-metrics":
      dynamicRoutes:
        - path: /copilot-metrics
          importName: CopilotMetricsPage
          menuItem:
            icon: AssessmentIcon
            text: Copilot Metrics

    # ── 9. GHAS Metrics — Custom Security Dashboard ──────────
    # Requires backend proxy to GitHub REST API
    "@internal/plugin-ghas-metrics":
      dynamicRoutes:
        - path: /ghas-metrics
          importName: GhasMetricsPage
          menuItem:
            icon: SecurityIcon
            text: GHAS Metrics

    # ── 10. Notifications ────────────────────────────────────
    "@backstage-community/plugin-notifications":
      dynamicRoutes:
        - path: /notifications
          importName: NotificationsPage
          menuItem:
            icon: NotificationsIcon
            text: Notifications

    # ── 11. Administration — RBAC Web UI ─────────────────────
    "@janus-idp/backstage-plugin-rbac":
      dynamicRoutes:
        - path: /admin/rbac
          importName: RbacPage
          menuItem:
            icon: AdminPanelSettingsIcon
            text: Administration

    # ── 12. Settings (native — built-in) ─────────────────────
    # Settings page is always available at /settings.

    # ── 13. Topology — Kubernetes Topology View ──────────────
    "@janus-idp/backstage-plugin-topology":
      dynamicRoutes:
        - path: /topology
          importName: TopologyPage
          menuItem:
            icon: StorageIcon
            text: Topology
      mountPoints:
        - mountPoint: entity.page.kubernetes/cards
          importName: TopologyPage
          config:
            if:
              allOf:
                - isKind: component
                - hasAnnotation: backstage.io/kubernetes-id
